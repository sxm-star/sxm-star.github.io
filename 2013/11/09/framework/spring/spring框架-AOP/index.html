<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Spring框架-AOP - 藏经阁</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="藏经阁"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="藏经阁"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="AOP介绍 AOP（ Aspect Orient Programming），面向切面编程，是面向对象编程OOP的一种补充面向对象编程是从静态角度考虑程序的结构，而面向切面编程是从动态角度考虑程序运行过程。AOP底层，就是采用动态代理模式实现的。采用了两种代理:JDK的动态代理，与CGLB的动态代理 AOP为 Aspect Oriented Programming的缩写，意为:面向切面编程，通过预编"><meta property="og:type" content="blog"><meta property="og:title" content="Spring框架-AOP"><meta property="og:url" content="http://example.com/2013/11/09/framework/spring/spring%E6%A1%86%E6%9E%B6-AOP/"><meta property="og:site_name" content="藏经阁"><meta property="og:description" content="AOP介绍 AOP（ Aspect Orient Programming），面向切面编程，是面向对象编程OOP的一种补充面向对象编程是从静态角度考虑程序的结构，而面向切面编程是从动态角度考虑程序运行过程。AOP底层，就是采用动态代理模式实现的。采用了两种代理:JDK的动态代理，与CGLB的动态代理 AOP为 Aspect Oriented Programming的缩写，意为:面向切面编程，通过预编"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/images/spring/AOP%E4%B8%BE%E4%BE%8B.png"><meta property="og:image" content="http://example.com/images/spring/advisor.png"><meta property="og:image" content="http://example.com/images/spring/default_proxy"><meta property="og:image" content="http://example.com/images/spring/name_proxy.png"><meta property="og:image" content="http://example.com/images/spring/%E5%90%88%E5%B9%B6%E5%88%87%E5%85%A5%E7%82%B9.jpeg"><meta property="og:image" content="http://example.com/images/spring/symbol.png"><meta property="og:image" content="http://example.com/images/spring/%E9%80%9A%E7%9F%A5%E8%8E%B7%E5%8F%96%E5%88%87%E5%85%A5%E7%82%B9%E7%BB%86%E8%8A%82.jpeg"><meta property="og:image" content="http://example.com/images/spring/%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5.png"><meta property="og:image" content="http://example.com/images/spring/%E8%BF%94%E5%9B%9E%E9%80%9A%E7%9F%A5.png"><meta property="og:image" content="http://example.com/images/spring/%E5%BC%82%E5%B8%B8%E9%80%9A%E7%9F%A5.png"><meta property="og:image" content="http://example.com/images/spring/%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5.png"><meta property="og:image" content="http://example.com/images/spring/xml%E6%96%B9%E5%BC%8F%E5%A3%B0%E6%98%8Easpect.png"><meta property="og:image" content="http://example.com/images/spring/%E6%B7%BB%E5%8A%A0%E5%88%87%E5%85%A5%E7%82%B9.png"><meta property="og:image" content="http://example.com/images/spring/xml%E6%96%B9%E5%BC%8F%E5%A3%B0%E6%98%8E%E9%80%9A%E7%9F%A5.png"><meta property="article:published_time" content="2013-11-09T12:52:41.000Z"><meta property="article:modified_time" content="2020-07-12T23:02:03.188Z"><meta property="article:author" content="sxm-star"><meta property="article:tag" content="’Developer,Programmer,Coder,Book,History,culture,science and technology‘"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/images/spring/AOP%E4%B8%BE%E4%BE%8B.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2013/11/09/framework/spring/spring%E6%A1%86%E6%9E%B6-AOP/"},"headline":"Spring框架-AOP","image":["http://example.com/images/spring/AOP%E4%B8%BE%E4%BE%8B.png","http://example.com/images/spring/advisor.png","http://example.com/images/spring/name_proxy.png","http://example.com/images/spring/symbol.png","http://example.com/images/spring/%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5.png","http://example.com/images/spring/%E8%BF%94%E5%9B%9E%E9%80%9A%E7%9F%A5.png","http://example.com/images/spring/%E5%BC%82%E5%B8%B8%E9%80%9A%E7%9F%A5.png","http://example.com/images/spring/%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5.png","http://example.com/images/spring/xml%E6%96%B9%E5%BC%8F%E5%A3%B0%E6%98%8Easpect.png","http://example.com/images/spring/%E6%B7%BB%E5%8A%A0%E5%88%87%E5%85%A5%E7%82%B9.png","http://example.com/images/spring/xml%E6%96%B9%E5%BC%8F%E5%A3%B0%E6%98%8E%E9%80%9A%E7%9F%A5.png"],"datePublished":"2013-11-09T12:52:41.000Z","dateModified":"2020-07-12T23:02:03.188Z","author":{"@type":"Person","name":"sxm-star"},"publisher":{"@type":"Organization","name":"藏经阁","logo":{"@type":"ImageObject","url":"http://example.com/img/logo.svg"}},"description":"AOP介绍 AOP（ Aspect Orient Programming），面向切面编程，是面向对象编程OOP的一种补充面向对象编程是从静态角度考虑程序的结构，而面向切面编程是从动态角度考虑程序运行过程。AOP底层，就是采用动态代理模式实现的。采用了两种代理:JDK的动态代理，与CGLB的动态代理 AOP为 Aspect Oriented Programming的缩写，意为:面向切面编程，通过预编"}</script><link rel="canonical" href="http://example.com/2013/11/09/framework/spring/spring%E6%A1%86%E6%9E%B6-AOP/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="藏经阁" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2013-11-09T12:52:41.000Z" title="2013/11/9 下午8:52:41">2013-11-09</time>发表</span><span class="level-item"><time dateTime="2020-07-12T23:02:03.188Z" title="2020/7/13 上午7:02:03">2020-07-13</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a><span> / </span><a class="link-muted" href="/categories/%E6%A1%86%E6%9E%B6/spring/">spring</a></span><span class="level-item">1 小时读完 (大约9130个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Spring框架-AOP</h1><div class="content"><h2 id="AOP介绍"><a href="#AOP介绍" class="headerlink" title="AOP介绍"></a>AOP介绍</h2><ul>
<li>AOP（ Aspect Orient Programming），面向切面编程，是面向对象编程OOP的一种补充面向对象编程是从静态角度考虑程序的结构，<strong>而面向切面编程是从动态角度考虑程序运行过程</strong>。AOP底层，就是采用<strong>动态代理模式</strong>实现的。采用了两种代理:JDK的动态代理，与CGLB的动态代理</li>
<li>AOP为 Aspect Oriented Programming的缩写，意为:面向切面编程，<strong>通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术</strong>。AOP是OOP的延续，是软件开发中的一个热点，也是 Spring框架中的一个重要内容，是函数式编程的一种衍生范型。利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率</li>
<li>将交叉业务逻辑封装成切面，利用AOP容器的功能将切面织入到主业务逻辑中。所谓交叉业务逻辑是指，通用的、与主业务逻辑无关的代码，<strong>如安全检查、事务、日志等。若不使用AOP，则会出现代码纠缠，即交叉业务逻辑与主业务逻辑混合在一起。这样会使主业务逻辑变的混杂不清</strong>，例如，转账，在真正转账业务逻辑前后，需要权限控制、日志记录、加载事务、结束事务<br><img src="/images/spring/AOP%E4%B8%BE%E4%BE%8B.png"><span id="more"></span>
<h2 id="AOP编程术语"><a href="#AOP编程术语" class="headerlink" title="AOP编程术语"></a>AOP编程术语</h2><h3 id="切面-Aspect"><a href="#切面-Aspect" class="headerlink" title="切面 (Aspect)"></a>切面 (Aspect)</h3>切面泛指交叉业务逻辑，上例中的事务处理、日志处理就可以理解为切面，常用的切面有<strong>通知</strong>与<strong>顾问</strong>，实际就是对主业务逻辑的一种增强<h3 id="织入（Weaving）"><a href="#织入（Weaving）" class="headerlink" title="织入（Weaving）"></a>织入（Weaving）</h3>类中的织入是指将切面代码插入到目标对象的过程，<strong>是指把增强应用到目标对象来创建新的代理对象的过程</strong>。<em>spring 采用动态代理织入</em>，而 AspectJ 采用<strong>编译期织入和类装载期织入</strong>。<h3 id="连接点（-Joinpoint）"><a href="#连接点（-Joinpoint）" class="headerlink" title="连接点（ Joinpoint）"></a>连接点（ Joinpoint）</h3>连接点指可以被切面织入的方法。通常业务接口中的方法均为连接点，所谓连接点是指那些被拦截到的点。<strong>在spring 中,这些点指的是方法,因为 spring 只支持方法类型的连接点。</strong><h3 id="切入点（-Pointcut）"><a href="#切入点（-Pointcut）" class="headerlink" title="切入点（ Pointcut）"></a>切入点（ Pointcut）</h3>切入点指切面具体织入的方法。<strong>所谓切入点是指我们要对哪些 Joinpoint 进行拦截的定义。</strong><br><strong>被标记为 final的方法是不能作为连接点与切入点的。因为最终的是不能被修改的，不能被增强的。</strong><h3 id="目标对象（-Target）"><a href="#目标对象（-Target）" class="headerlink" title="目标对象（ Target）"></a>目标对象（ Target）</h3>目标对象指将要被增强的对象。即包含主业务逻辑的类的对象。上例中的 Studentservicelmpl的对象若被增强，则该类称为目标类，该类对象称为目标对象。当然不被增强，也就无所谓目标不目标了。<h3 id="通知（-Advice）"><a href="#通知（-Advice）" class="headerlink" title="通知（ Advice）"></a>通知（ Advice）</h3>通知是切面的一种实现，可以完成简单织入功能（织功能就是在这里完成的）。<strong>所谓通知是指拦截到 Joinpoint 之后所要做的事情就是通知。</strong> 通知的类型:前置通知,后置通知,异常通知,最终通知,环绕通知。<strong>切入点定义切入的位置，通知定义时间。</strong><h3 id="顾问（-Advisor）"><a href="#顾问（-Advisor）" class="headerlink" title="顾问（ Advisor）"></a>顾问（ Advisor）</h3>顾问是切面的另一种实现，能够将通知以更为复杂的方式织入到目标对象中，是将通知包装为更复杂切面的装配器</li>
</ul>
<h2 id="通知详解"><a href="#通知详解" class="headerlink" title="通知详解"></a>通知详解</h2><h3 id="前置通知-Methodbeforeadvice"><a href="#前置通知-Methodbeforeadvice" class="headerlink" title="前置通知 Methodbeforeadvice"></a>前置通知 Methodbeforeadvice</h3><p>定义前置通知，需要实现 MethodBeforeAdvice接口。该接口中有一个方法 before，会在目标方法执行之前执行。前置通知的特点<br><strong>在目标方法执行之前先执行</strong><br><strong>不改变目标方法的执行流程，前置通知代码不能阻止目标方法执行</strong><br><strong>不改变目标方法执行的结果</strong></p>
<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;beans&gt;
        &lt;!-- 注册目标对象 --&gt;
        &lt;bean id=&quot;someService&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot;&gt;
        &lt;/bean&gt;
        &lt;!-- 注册切面:前置通知 --&gt;
        &lt;bean id=&quot;beforeAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodBeforeAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 代理模式工厂bean配置 --&gt;
        &lt;bean id=&quot;serviceProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;target&quot; ref=&quot;someService&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;interceptorNames&quot; value=&quot;beforeAdvice&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre>
<p>前置通知实现类</p>
<pre><code class="line-numbers language-java">package com.songxm.learning.spring.aop;
import java.lang.reflect.Method;
import org.springframework.aop.MethodBeforeAdvice;
public class MyMethodBeforeAdvice implements MethodBeforeAdvice &#123;
    @Override
    public void before(Method arg0, Object[] arg1, Object arg2) throws Throwable &#123;
        System.out.println(&quot;执行前置通知&quot;);
    &#125;
&#125;
</code></pre>
<p>目标对象</p>
<pre><code class="line-numbers language-java">package com.songxm.learning.spring.service;
public interface ISomeService &#123;
    public String doSome(String task);
&#125;
package com.songxm.learning.spring.service;
public class SomeServiceImpl implements ISomeService &#123;
    public SomeServiceImpl() &#123;
        System.out.println(&quot;执行无参构造器!!!!&quot;);
    &#125;
    @Override
    public String doSome(String task) &#123;
        System.out.println(&quot;doSome.....&quot; + task);
        return task;
    &#125;
&#125;
</code></pre>
<h3 id="后置通知-AfterReturningAdvice"><a href="#后置通知-AfterReturningAdvice" class="headerlink" title="后置通知 AfterReturningAdvice"></a>后置通知 AfterReturningAdvice</h3><p>定义后置通知，需要实现接口 AfterReturningAdvice.该接口中有一个方法 afterReturning会在目标方法执行之后执行。后置通知的特点:<br><strong>在目标方法执行之后执行</strong><br><strong>不改变目标方法的执行流程，后置通知代码不能阻止目标方法执行</strong><br><strong>不改变目标方法执行的结果</strong></p>
<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;beans&gt;
        &lt;!-- 注册目标对象 --&gt;
        &lt;bean id=&quot;someService&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot;&gt;
        &lt;/bean&gt;
        &lt;!-- 注册切面:前置通知 --&gt;
        &lt;bean id=&quot;beforeAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodBeforeAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:后置通知 --&gt;
        &lt;bean id=&quot;afterAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyAfterReturn&quot;&gt;&lt;/bean&gt;
        &lt;!-- 代理模式工厂bean配置 --&gt;
        &lt;bean id=&quot;serviceProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;target&quot; ref=&quot;someService&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;interceptorNames&quot; value=&quot;beforeAdvice,afterAdvice&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre>
<p>afterAdvice 实现类</p>
<pre><code class="line-numbers language-java">package com.songxm.learning.spring.aop;
import java.lang.reflect.Method;
import org.springframework.aop.AfterReturningAdvice;
public class MyAfterReturn implements AfterReturningAdvice &#123;
    @Override
    public void afterReturning(Object arg0, Method arg1, Object[] arg2, Object arg3) throws Throwable &#123;
        System.out.println(&quot;执行后置通知&quot;);
    &#125;
&#125;
输出结果：
执行无参构造器!!!!
执行前置通知
doSome.....aaa
后置通知
</code></pre>
<h3 id="环绕通知-Methodlnterceptor"><a href="#环绕通知-Methodlnterceptor" class="headerlink" title="环绕通知 Methodlnterceptor"></a>环绕通知 Methodlnterceptor</h3><p><strong>定义环绕通知，需要实现 MethodInterceptor接口。环绕通知，也叫方法拦截器，可以在目标方法调用之前及之后做处理，可以改变目标方法的返回值，也可以改变程序执行流程。</strong></p>
<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;beans&gt;
        &lt;!-- 注册目标对象 --&gt;
        &lt;bean id=&quot;someService&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot;&gt;
        &lt;/bean&gt;
        &lt;!-- 注册切面:前置通知 --&gt;
        &lt;bean id=&quot;beforeAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodBeforeAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:后置通知 --&gt;
        &lt;bean id=&quot;afterAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyAfterReturn&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:环绕通知 --&gt;
        &lt;bean id=&quot;interceptorAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodInterceptor&quot;&gt;&lt;/bean&gt;
        &lt;!-- 代理模式工厂bean配置 --&gt;
        &lt;bean id=&quot;serviceProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;target&quot; ref=&quot;someService&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;interceptorNames&quot; value=&quot;beforeAdvice,afterAdvice,interceptorAdvice&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre>
<pre><code class="line-numbers language-java">package com.songxm.learning.spring.aop;
import org.aopalliance.intercept.MethodInterceptor;
import org.aopalliance.intercept.MethodInvocation;
// 环绕通知可以修改目标方法
public class MyMethodInterceptor implements MethodInterceptor &#123;
    @Override
    public Object invoke(MethodInvocation invocation) throws Throwable &#123;
        System.out.println(&quot;执行环绕通知之前。。。。。。。&quot;);
        Object result = invocation.proceed(); //执行目标方法
        System.out.println(&quot;执行环绕通知之后。。。。。。。&quot;);
        return ((String)result).toUpperCase();
    &#125;
&#125;
输出结果:
执行无参构造器!!!!
执行前置通知
执行环绕通知之前。。。。。。。
doSome.....aaa
执行环绕通知之后。。。。。。。
执行后置通知
AAA
</code></pre>
<h3 id="异常通知"><a href="#异常通知" class="headerlink" title="异常通知"></a>异常通知</h3><p>只在连接点抛出异常时才执行异常通知</p>
<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;beans&gt;
        &lt;!-- 注册目标对象 --&gt;
        &lt;bean id=&quot;someService&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot;&gt;
        &lt;/bean&gt;
        &lt;!-- 注册切面:前置通知 --&gt;
        &lt;bean id=&quot;beforeAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodBeforeAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:后置通知 --&gt;
        &lt;bean id=&quot;afterAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyAfterReturn&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:环绕通知 --&gt;
        &lt;bean id=&quot;interceptorAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodInterceptor&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:异常通知 --&gt;
        &lt;bean id=&quot;exceptionAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyExceptionAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 代理模式工厂bean配置 --&gt;
        &lt;bean id=&quot;serviceProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;target&quot; ref=&quot;someService&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;interceptorNames&quot; value=&quot;beforeAdvice,afterAdvice,interceptorAdvice,exceptionAdvice&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre>
<pre><code class="line-numbers language-java">package com.songxm.learning.spring.exception;
public class UserException extends Exception &#123;
    public UserException() &#123;
        super();
    &#125;
    public UserException(String message) &#123;
        super(message);
    &#125;
&#125;
package com.songxm.learning.spring.exception;
public class UserNaneException extends UserException &#123;
    public UserNaneException() &#123;
        super();
    &#125;
    public UserNaneException(String message) &#123;
        super(message);
    &#125;
&#125;
package com.songxm.learning.spring.exception;
public class PasswdException extends UserException &#123;
    public PasswdException() &#123;
        super();
    &#125;
    public PasswdException(String message) &#123;
        super(message);
    &#125;
&#125;
</code></pre>
<p><strong>连接点 业务类接口</strong></p>
<pre><code class="line-numbers language-java">package com.songxm.learning.spring.service;
import com.songxm.learning.spring.exception.UserException;
public interface ISomeService &#123;
    public String doSome(String task);
    public boolean login(String username,String passwd) throws UserException;
&#125;
package com.songxm.learning.spring.service;
import com.songxm.learning.spring.exception.PasswdException;
import com.songxm.learning.spring.exception.UserException;
import com.songxm.learning.spring.exception.UserNaneException;
public class SomeServiceImpl implements ISomeService &#123;
    public SomeServiceImpl() &#123;
        System.out.println(&quot;执行无参构造器!!!!&quot;);
    &#125;
    @Override
    public String doSome(String task) &#123;
        System.out.println(&quot;doSome.....&quot; + task);
        return task;
    &#125;
    @Override
    public boolean login(String username, String passwd) throws UserException &#123;
        if(&quot;111111&quot;.equals(username))
        &#123;
            throw new UserNaneException(&quot;用户名太简单&quot;);
        &#125;
        if(&quot;111111&quot;.equals(passwd))&#123;
            throw new PasswdException(&quot;密码太简单&quot;);
        &#125;
        //double a = 3 / 0;
        return true;
    &#125;
&#125;
</code></pre>
<p>测试</p>
<pre><code class="line-numbers language-java">import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;
import com.songxm.learning.spring.exception.UserException;
import com.songxm.learning.spring.service.ISomeService;
public class TestSpring &#123;
    @Test
    public void testApplicationContext() throws UserException &#123;
        ApplicationContext ac = new FileSystemXmlApplicationContext(&quot;classpath:applicationContext.xml&quot;);
        ISomeService someservice = (ISomeService) ac.getBean(&quot;serviceProxy&quot;);
        someservice.login(&quot;ss&quot;, &quot;111111&quot;);
    &#125;
&#125;
输出:
执行无参构造器!!!!
执行前置通知
执行环绕通知之前。。。。。。。
密码异常:com.songxm.learning.spring.exception.PasswdException: 密码太简单
</code></pre>
<h4 id="异常通知注意点"><a href="#异常通知注意点" class="headerlink" title="异常通知注意点"></a>异常通知注意点</h4><p><strong>ps:注意默认代理类会自动根据 业务类是否有接口，而使用不同的底层代理实现类 ，有接口默认使用jdk自带的，没接口使用cglib代理实现类，若要明确强制指定使用cglib，可有两种方式设置</strong></p>
<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;beans&gt;
        &lt;!-- 注册目标对象 --&gt;
        &lt;bean id=&quot;someService&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot;&gt;
        &lt;/bean&gt;
        &lt;!-- 注册切面:前置通知 --&gt;
        &lt;bean id=&quot;beforeAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodBeforeAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:后置通知 --&gt;
        &lt;bean id=&quot;afterAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyAfterReturn&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:环绕通知 --&gt;
        &lt;bean id=&quot;interceptorAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodInterceptor&quot;&gt;&lt;/bean&gt;
        &lt;bean id=&quot;exceptionAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyExceptionAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 代理模式工厂bean配置 --&gt;
        &lt;bean id=&quot;serviceProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;target&quot; ref=&quot;someService&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;interceptorNames&quot; value=&quot;beforeAdvice,afterAdvice,interceptorAdvice,exceptionAdvice&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;proxyTargetClass&quot; value=&quot;true&quot;&gt;&lt;/property&gt;&lt;!-- 代理模式工厂第一种方式设置代理实现类cglib--&gt;
        &lt;!-- 代理模式工厂第二种方式设置代理实现类cglib
        &lt;property name=&quot;optimize&quot; value=&quot;true&quot;&gt;&lt;/property&gt; 
        --&gt;
        &lt;/bean&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre>
<h2 id="顾问-Advisor"><a href="#顾问-Advisor" class="headerlink" title="顾问 Advisor"></a>顾问 Advisor</h2><p><strong>通知</strong>（ Advice）是 Spring提供的一种切面（ Aspect）。但其功能过于简单:只能将切面织入到目标类的所有目标方法中，<strong>无法完成将切面织入到指定目标方法中</strong><br><strong>顾问</strong>（ Advisor）是 Spring提供的另一种切面。其可以完成更为复杂的切面织入功能 Pointcutadvisor是顾间的一种，可以指定具体的切入点。顾问将通知进行了包装，会根据不同的通知类型，在不同的时间点，<strong>将切面织入到不同的切入点</strong>。<br>Pointcutadvisor接口有两个较为常用的实现类</p>
<ol>
<li><strong>NameMatchMethodPointcutAdvisor名称匹配方法切入点顾问</strong></li>
<li><strong>RegexpMethodPointcutadvisor正则表达式匹配方法切入点顾问</strong></li>
</ol>
<h3 id="名称匹配方法切入点顾问"><a href="#名称匹配方法切入点顾问" class="headerlink" title="名称匹配方法切入点顾问"></a>名称匹配方法切入点顾问</h3><p>NameMatchMethodPointcutAdvisor，即名称匹配方法切入点顾问。容器可根据配置文件中指定的方法名来设置切入点。<br>代码不用修改，只在配置文件中注册一个顾问，然后使用通知属性 advice与切入点的法名 mappedname对其进行配置。代理中的切面，使用这个顾问即可。<br>示例 配置顾问，只对前置通知包装，只切入业务层的指定的一个具体方法</p>
<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;beans&gt;
        &lt;!-- 注册目标对象 --&gt;
        &lt;bean id=&quot;someService&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot;&gt;
        &lt;/bean&gt;
        &lt;!-- 注册切面:前置通知 --&gt;
        &lt;bean id=&quot;beforeAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodBeforeAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:后置通知 --&gt;
        &lt;bean id=&quot;afterAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyAfterReturn&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册切面:环绕通知 --&gt;
        &lt;bean id=&quot;interceptorAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodInterceptor&quot;&gt;&lt;/bean&gt;
        &lt;bean id=&quot;exceptionAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyExceptionAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册顾问 --&gt;
        &lt;bean id=&quot;nameMatchadvisor&quot; class=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&gt;
        &lt;property name=&quot;advice&quot; ref=&quot;beforeAdvice&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;mappedName&quot; value=&quot;doSome&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!-- 代理模式工厂bean配置 --&gt;
        &lt;bean id=&quot;serviceProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;target&quot; ref=&quot;someService&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;interceptorNames&quot; value=&quot;nameMatchadvisor&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;proxyTargetClass&quot; value=&quot;true&quot;&gt;&lt;/property&gt;&lt;!-- 代理模式工厂第一种方式设置代理实现类cglib--&gt;
        &lt;!-- 代理模式工厂第二种方式设置代理实现类cglib
        &lt;property name=&quot;optimize&quot; value=&quot;true&quot;&gt;&lt;/property&gt; 
        --&gt;
        &lt;/bean&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre>
<p><img src="/images/spring/advisor.png"><br><strong>测试结果</strong></p>
<pre><code class="line-numbers language-java">import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;
import com.songxm.learning.spring.exception.UserException;
import com.songxm.learning.spring.service.ISomeService;
public class TestSpring &#123;
    @Test
    public void testApplicationContext() throws UserException &#123;
        ApplicationContext ac = new FileSystemXmlApplicationContext(&quot;classpath:applicationContext.xml&quot;);
        ISomeService someservice = (ISomeService) ac.getBean(&quot;serviceProxy&quot;);
        someservice.doSome(&quot;aaaa&quot;);
        someservice.login(&quot;ss&quot;, &quot;11&quot;);
    &#125;
&#125;
输出：
执行无参构造器!!!!
执行前置通知
doSome.....aaaa
</code></pre>
<h2 id="自动代理生成器-解决ProxyFactoryBean的问题一次只能代理一个bean"><a href="#自动代理生成器-解决ProxyFactoryBean的问题一次只能代理一个bean" class="headerlink" title="自动代理生成器 解决ProxyFactoryBean的问题一次只能代理一个bean"></a>自动代理生成器 解决ProxyFactoryBean的问题一次只能代理一个bean</h2><pre><code class="line-numbers language-text">前面代码中所使用的代理对象，均是由 ProxyFactoryBean代理工具类生成的，而该代理工具类存在着如下缺点:
（1）一个代理对象只能代理一个Bean，即如果有两个Bean同时都要织同一个切面，这时，不仅要配置这两个Bean，即两个目标对象，同时还要配置两代理对象
（2）在客户类中获取Bean时，使用的是代理类的id，而非我们定义的目标对象Bean的id我们真正想要执行的应该是目标对象。从形式上看，不符合正常的逻辑
 Spring提供了自动代理生成器，用于解决 ProxyFactoryBean的问题。常用的自动代理生成器有两个: 默认advisor自动代理生成器 ,Bean名称自动代理生成器
需要注意的是，自动代理生成器均继承自Bean后处理器 BeanPostProcessor。容器中所有Bean在初始化时均会自动执行Bean后处理器中的方法，故其无需id属性。所以自动代理生成器的Bean也没有id属性，客户类直接使用目标对象bean的id
</code></pre>
<h3 id="默认advisor自动代理生成器"><a href="#默认advisor自动代理生成器" class="headerlink" title="默认advisor自动代理生成器"></a>默认advisor自动代理生成器</h3><pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;beans&gt;
        &lt;!-- 注册目标对象 --&gt;
        &lt;bean id=&quot;someService&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot; /&gt;
         &lt;!-- 注册目标对象2 --&gt;
        &lt;bean id=&quot;someService2&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot; /&gt;
        &lt;!-- 注册切面:前置通知 --&gt;
        &lt;bean id=&quot;beforeAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodBeforeAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册顾问 --&gt;
        &lt;bean id=&quot;nameMatchadvisor&quot; class=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&gt;
        &lt;property name=&quot;advice&quot; ref=&quot;beforeAdvice&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;mappedName&quot; value=&quot;doSome&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!-- 注册自动代理生成器 --&gt;
        &lt;bean  class=&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot;&gt;&lt;/bean&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre>
<pre><code class="line-numbers language-java">import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;
import com.songxm.learning.spring.exception.UserException;
import com.songxm.learning.spring.service.ISomeService;
public class TestSpring &#123;
    @Test
    public void testApplicationContext() throws UserException &#123;
        ApplicationContext ac = new FileSystemXmlApplicationContext(&quot;classpath:applicationContext.xml&quot;);
        ISomeService someservice = (ISomeService) ac.getBean(&quot;someService&quot;);
        someservice.doSome(&quot;aaaa&quot;);
        someservice.login(&quot;ss&quot;, &quot;11&quot;);
        ISomeService someservice2 = (ISomeService) ac.getBean(&quot;someService2&quot;);
        someservice2.doSome(&quot;bbbb&quot;);
        someservice2.login(&quot;bb&quot;, &quot;bb&quot;);
    &#125;
&#125;
输出:
执行无参构造器!!!!
执行无参构造器!!!!
执行前置通知
doSome.....aaaa
执行前置通知
doSome.....bbbb
</code></pre>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p><img src="/images/spring/default_proxy"></p>
<h3 id="Bean名称自动代理生成器"><a href="#Bean名称自动代理生成器" class="headerlink" title="Bean名称自动代理生成器"></a>Bean名称自动代理生成器</h3><p>可指定具体的目标对象，可指定具体的顾问</p>
<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;beans&gt;
        &lt;!-- 注册目标对象 --&gt;
        &lt;bean id=&quot;someService&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot; /&gt;
         &lt;!-- 注册目标对象2 --&gt;
        &lt;bean id=&quot;someService2&quot; class=&quot;com.songxm.learning.spring.service.SomeServiceImpl&quot; /&gt;
        &lt;!-- 注册切面:前置通知 --&gt;
        &lt;bean id=&quot;beforeAdvice&quot; class=&quot;com.songxm.learning.spring.aop.MyMethodBeforeAdvice&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册顾问1 --&gt;
        &lt;bean id=&quot;nameMatchadvisor&quot; class=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&gt;
        &lt;property name=&quot;advice&quot; ref=&quot;beforeAdvice&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;mappedName&quot; value=&quot;doSome&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!-- 注册顾问2 --&gt;
        &lt;bean id=&quot;nameMatchadvisor2&quot; class=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&gt;
        &lt;property name=&quot;advice&quot; ref=&quot;beforeAdvice&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;mappedName&quot; value=&quot;doSome&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!-- 注册自动代理生成器 --&gt;
        &lt;bean  class=&quot;org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator&quot;&gt;
          &lt;property name=&quot;beanNames&quot; value=&quot;someService2&quot;&gt;&lt;/property&gt;
          &lt;property name=&quot;interceptorNames&quot; value=&quot;nameMatchadvisor2&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    &lt;/beans&gt;
&lt;/beans&gt;
</code></pre>
<p><img src="/images/spring/name_proxy.png"></p>
<h2 id="AspectJ-对AOP的实现–基于注解方式"><a href="#AspectJ-对AOP的实现–基于注解方式" class="headerlink" title="AspectJ 对AOP的实现–基于注解方式"></a>AspectJ 对AOP的实现–基于注解方式</h2><p>对于AOP这种编程思想，很多框架都进行了实现。 Spring就是其中之一，可以完成面向切面编程。然而， Aspect也实现了AOP的功能，且其实现方式更为简捷，使用更为方便而且还支持注解式开发。所以， Spring又将 Aspect的对于AOP的实现也引入到了自己的框架中.<br><strong>在 Spring中使用AOP开发时，一般使用 AspectJ的实现方式</strong></p>
<h3 id="AspectJ简介"><a href="#AspectJ简介" class="headerlink" title="AspectJ简介"></a>AspectJ简介</h3><ul>
<li>AspectJ是一个面向切面的框架，它扩展了Java语言。 AspectJ定义了AOP语法，它有个专门的编译器用来生成遵守Java字节编码规范的 Class文件,用 AspectJ 注解声明切面,要在 Spring中声明AspectJ切面, 只需要在IOC容器中将切面声明为Bean实例. 当在 Spring IOC 容器中初始化 AspectJ 切面之后, <strong>Spring IOC 容器就会为那些与 AspectJ 切面相匹配的 Bean 创建代理.</strong></li>
<li>在 AspectJ 注解中, 切面只是一个带有 @Aspect 注解的 Java 类. 通知是标注有某种注解的简单的 Java 方法.<strong>AspectJ 支持 5 种类型的通知注解:</strong><br> @Before: 前置通知, 在方法执行之前执行<br> @After: 后置通知, 在方法执行之后执行<br> @AfterRunning: 返回通知, 在方法返回结果之后执行<br> @AfterThrowing: 异常通知, 在方法抛出异常之后<br> @Around: 环绕通知, 围绕着方法执行</li>
<li>在 AspectJ 中, 切入点表达式可以通过操作符 &amp;&amp;, ||, ! 结合起来.<br><img src="/images/spring/%E5%90%88%E5%B9%B6%E5%88%87%E5%85%A5%E7%82%B9.jpeg"></li>
<li>Aspect除了提供了六种通知外，还定义了专门的表达式用于指定切入点。表达式的原型是:<br>execution(表达式)<br>表达式语法:execution([修饰符] 返回值类型 包名.类名.方法名(参数))<pre><code class="line-numbers language-java">execution（［ modifiers－pattern］访问权限类型
          ret－type－ pattern   返回值类型
          [declaring－type－pattern］全限定性类名
          name－pattern（param－pattern）方法名（参数名)
          [throws－ pattern］抛出异常类型
) 
</code></pre>
切入点表达式要匹配的对象就是目标方法的方法名。所以， execution表达式中明显就是方法的签名。注意，表达式中加［的部分表示可省略部分，各部分间用空格分开。在其中可以使用以下符号:<br><img src="/images/spring/symbol.png"><br><strong>切入点表达式举例：</strong><br>&#96;&#96;&#96;java<br>&#x2F;&#x2F;返回值可以使用<em>号，表示任意返回值 *<br> com.ecit.service.impl.AccountServiceImpl.saveAccount(com.ecit.domain.Account)<br>&#x2F;&#x2F;包名可以使用</em>号，表示任意包，但是有几级包，需要写几个*</li>
</ul>
<ul>
<li><em>.</em>.<em>.</em>.AccountServiceImpl.saveAccount(com.ecit.domain.Account)<br>&#x2F;&#x2F;使用..来表示当前包，及其子包</li>
<li>com..AccountServiceImpl.saveAccount(com.ecit.domain.Account)<br>&#x2F;&#x2F;类名可以使用*号，表示任意类</li>
<li>com..<em>.saveAccount(com.ecit.domain.Account)<br>&#x2F;&#x2F;方法名可以使用</em>号，表示任意方法</li>
<li>com..<em>.</em>(com.ecit.domain.Account)<br>&#x2F;&#x2F;参数列表可以使用*，表示参数可以是任意数据类型，但是必须有参数</li>
<li>com..<em>.</em>(*)<br>&#x2F;&#x2F;参数列表可以使用..表示有无参数均可，有参数可以是任意类型</li>
<li>com..<em>.</em>(..)<br>&#x2F;&#x2F;注:全通配方式:</li>
<li><em>..</em>.<em>(..)<br>&#x2F;&#x2F;通常情况下，我们都是对业务层的方法进行增强，所以切入点表达式都是切到业务层实现类。<br>execution(</em> com.ecit.service.impl.<em>.</em>(..))<br>&#96;&#96;&#96;</li>
</ul>
<h3 id="AspectJ开发环境"><a href="#AspectJ开发环境" class="headerlink" title="AspectJ开发环境"></a>AspectJ开发环境</h3><ul>
<li>依赖的jar包,需要再添加 两个<pre><code class="line-numbers language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
  &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
  &lt;version&gt;1.6.8&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
  &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;
  &lt;version&gt;1.6.8&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li><strong>要在 Spring IOC 容器中启用 AspectJ 注解支持, 只要在 Bean 配置文件中定义一个空的 XML 元素</strong><pre><code class="line-numbers language-xml">&lt;aop:aspectj-autoproxy&gt;
</code></pre>
</li>
<li>前置通知 让通知访问当前连接点的细节<br> 可以在通知方法中声明一个类型为 JoinPoint 的参数. 然后就能访问链接细节. 如方法名称和参数值<br><img src="/images/spring/%E9%80%9A%E7%9F%A5%E8%8E%B7%E5%8F%96%E5%88%87%E5%85%A5%E7%82%B9%E7%BB%86%E8%8A%82.jpeg"></li>
<li>后置通知<br> 后置通知是在连接点完成之后执行的, 即连接点返回结果或者抛出异常的时候, 下面的后置通知记录了方法的终止. 一个切面可以包括一个或者多个通知.<br><img src="/images/spring/%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5.png"></li>
<li>返回通知<br> 无论连接点是正常返回还是抛出异常, 后置通知都会执行. <strong>如果只想在连接点返回的时候记录日志, 应使用返回通知代替后置通知.</strong><br><img src="/images/spring/%E8%BF%94%E5%9B%9E%E9%80%9A%E7%9F%A5.png"></li>
<li>异常通知<br> <strong>只在连接点抛出异常时才执行异常通知</strong>，将 throwing 属性添加到 @AfterThrowing 注解中, 也可以访问连接点抛出的异常. Throwable 是所有错误和异常类的超类. **所以在异常通知方法可以捕获到任何错误和异常.**如果只对某种特殊的异常类型感兴趣, 可以将参数声明为其他异常的参数类型. 然后通知就只在抛出这个类型及其子类的异常时才被执行.<br><img src="/images/spring/%E5%BC%82%E5%B8%B8%E9%80%9A%E7%9F%A5.png"></li>
<li>环绕通知 <strong>通常情况下环绕通知都是单独使用的，它可囊括AOP通知的各个阶段</strong><br> 环绕通知是所有通知类型中功能最为强大的, 能够全面地控制连接点. 甚至可以控制是否执行连接点.<br> <strong>对于环绕通知来说, 连接点的参数类型必须是 ProceedingJoinPoint</strong>. 它是 JoinPoint 的子接口, <strong>允许控制何时执行, 是否执行连接点.</strong><br> 在环绕通知中<strong>需要明确调用 ProceedingJoinPoint 的 proceed() 方法来执行被代理的方法</strong>. 如果忘记这样做就会导致通知被执行了, 但目标方法没有被执行.<br> 注意: <strong>环绕通知的方法需要返回目标方法执行之后的结果, 即调用 joinPoint.proceed(); 的返回值, 否则会出现空指针异常</strong><br><img src="/images/spring/%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5.png"></li>
<li>指定切面的优先级<br> 在同一个连接点上应用不止一个切面时, 除非明确指定, 否则它们的优先级是不确定的.<br> 切面的优先级可以通过实现 Ordered 接口或利用 @Order 注解指定.<br> 实现 Ordered 接口, getOrder() 方法的返回值越小, 优先级越高.<br> 若使用 @Order 注解, 序号出现在注解中<pre><code class="line-numbers language-java">@Aspect
@Order(0)
public class CalculaotorValidationAspect &#123;&#125;
@Aspect
@Order(1)
public class CalculatorLogginghspect &#123;&#125;
</code></pre>
</li>
<li>重用切入点定义<br> 在 AspectJ 切面中, 可以通过 @Pointcut 注解将一个切入点声明成简单的方法. 切入点的方法体通常是空的.<br> 切入点方法的访问控制符同时也控制着这个切入点的可见性. 如果切入点要在多个切面中共用, 最好将它们集中在一个公共的类中. 在这种情况下, 它们必须被声明为 public. 在引入这个切入点时, 必须将类名也包括在内. 如果类没有与这个切面放在同一个包中, 还必须包含包名.</li>
</ul>
<h2 id="AspectJ-对AOP的实现–基于XML方式"><a href="#AspectJ-对AOP的实现–基于XML方式" class="headerlink" title="AspectJ 对AOP的实现–基于XML方式"></a>AspectJ 对AOP的实现–基于XML方式</h2><ul>
<li>基于XML声明切面<pre><code class="line-numbers language-xml">当使用 XML 声明切面时, 需要在 &lt;beans&gt; 根元素中导入 aop Schema,在 Bean 配置文件中, 所有的 Spring AOP 配置都必须定义在 &lt;aop:config&gt; 元素内部. 对于每个切面而言, 都要创建一个 &lt;aop:aspect&gt; 元素来为具体的切面实现引用后端 Bean 实例. 
切面 Bean 必须有一个标示符, 供 &lt;aop:aspect&gt; 元素引用
</code></pre>
<img src="/images/spring/xml%E6%96%B9%E5%BC%8F%E5%A3%B0%E6%98%8Easpect.png"></li>
<li>基于XML声明切入点<pre><code class="line-numbers language-xml">切入点使用 &lt;aop:pointcut&gt; 元素声明
切入点必须定义在 &lt;aop:aspect&gt; 元素下, 或者直接定义在 &lt;aop:config&gt; 元素下.
定义在 &lt;aop:aspect&gt; 元素下: 只对当前切面有效
定义在 &lt;aop:config&gt; 元素下: 对所有切面都有效
基于 XML 的 AOP 配置不允许在切入点表达式中用名称引用其他切入点. 
</code></pre>
<img src="/images/spring/%E6%B7%BB%E5%8A%A0%E5%88%87%E5%85%A5%E7%82%B9.png"></li>
<li>基于 XML声明通知<pre><code class="line-numbers language-xml">在 aop Schema 中, 每种通知类型都对应一个特定的 XML 元素. 
通知元素需要使用 &lt;pointcut-ref&gt; 来引用切入点, 或用 &lt;pointcut&gt; 直接嵌入切入点表达式.  method 属性指定切面类中通知方法的名称.
</code></pre>
<img src="/images/spring/xml%E6%96%B9%E5%BC%8F%E5%A3%B0%E6%98%8E%E9%80%9A%E7%9F%A5.png"></li>
</ul>
<h2 id="AOP实战例子-数据库事务"><a href="#AOP实战例子-数据库事务" class="headerlink" title="AOP实战例子-数据库事务"></a>AOP实战例子-数据库事务</h2><h3 id="不依赖Spring-tx模块使用基于注解方式的aop示例-环绕注解方式实现的事务"><a href="#不依赖Spring-tx模块使用基于注解方式的aop示例-环绕注解方式实现的事务" class="headerlink" title="不依赖Spring-tx模块使用基于注解方式的aop示例:(环绕注解方式实现的事务)"></a>不依赖Spring-tx模块使用基于注解方式的aop示例:(环绕注解方式实现的事务)</h3><ul>
<li>添加所用到的jar包依赖<pre><code class="line-numbers language-xml">&lt;dependencies&gt;
&lt;!--bean的get set简化--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
  &lt;artifactId&gt;lombok&lt;/artifactId&gt;
  &lt;version&gt;1.18.12&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--spring框架核心的依赖--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.springframework&lt;/groupId&gt;
  &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
  &lt;version&gt;4.3.12.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--aop用到的依赖--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.springframework&lt;/groupId&gt;
  &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;
  &lt;version&gt;4.3.12.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;aopalliance&lt;/groupId&gt;
  &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
  &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
  &lt;version&gt;1.8.7&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--封装的JDBC操作工具类--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;commons-dbutils&lt;/groupId&gt;
  &lt;artifactId&gt;commons-dbutils&lt;/artifactId&gt;
  &lt;version&gt;1.5&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--数据库连接池--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;c3p0&lt;/groupId&gt;
  &lt;artifactId&gt;c3p0&lt;/artifactId&gt;
  &lt;version&gt;0.9.1.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--mysql数据库驱动--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;mysql&lt;/groupId&gt;
  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
  &lt;version&gt;5.1.45&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--纯JUnit测试包--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;junit&lt;/groupId&gt;
  &lt;artifactId&gt;junit&lt;/artifactId&gt;
  &lt;version&gt;4.12&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;!--日志框架--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;log4j&lt;/groupId&gt;
  &lt;artifactId&gt;log4j&lt;/artifactId&gt;
  &lt;version&gt;1.2.12&lt;/version&gt;
&lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
</li>
<li>添加spring-bean.xml资源配置文件<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
     xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
     xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
     xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans.xsd
      http://www.springframework.org/schema/aop
      http://www.springframework.org/schema/aop/spring-aop.xsd
      http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;
  &lt;context:property-placeholder location=&quot;db-pro.properties&quot; /&gt;
  &lt;!--配置spring创建容器时要扫描的包--&gt;
  &lt;context:component-scan base-package=&quot;com.ecit&quot;&gt;&lt;/context:component-scan&gt;
  &lt;!--配置QueryRunner--&gt;
  &lt;bean id=&quot;runner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;
  &lt;!-- 配置数据源 --&gt;
  &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
      &lt;!--连接数据库的必备信息--&gt;
      &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!--开启spring对注解AOP的支持--&gt;
  &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
&lt;/beans&gt;
</code></pre>
</li>
<li>准备的SQL表结构<pre><code class="line-numbers language-sql">CREATE TABLE `account` (
`id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;,
`money` float(8,2) DEFAULT NULL COMMENT &#39;余额&#39;,
`name` varchar(20) DEFAULT NULL COMMENT &#39;姓名&#39;,
PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4;
</code></pre>
</li>
<li>抽取事务管理类<br>&#96;&#96;&#96;java<br>package com.ecit.utils;<br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.stereotype.Component;<br>import javax.sql.DataSource;<br>import java.sql.Connection;<br>&#x2F;**</li>
</ul>
<ul>
<li>连接的工具类，它用于从数据源中获取一个连接，并且实现和线程的绑定<br> <em>&#x2F;<br>@Component(“connectionUtils”)<br>public class ConnectionUtils {<br> private ThreadLocal<Connection> tl &#x3D; new ThreadLocal<Connection>();<br> @Autowired<br> private DataSource dataSource;<br> &#x2F;</em>*<ul>
<li>获取当前线程上的连接</li>
<li>@return<br>  <em>&#x2F;<br> public Connection getThreadConnection() {<br> try{<br> &#x2F;&#x2F;1.先从ThreadLocal上获取<br> Connection conn &#x3D; tl.get();<br> &#x2F;&#x2F;2.判断当前线程上是否有连接<br> if (conn &#x3D;&#x3D; null) {<br>     &#x2F;&#x2F;3.从数据源中获取一个连接，并且存入ThreadLocal中<br>     conn &#x3D; dataSource.getConnection();<br>     tl.set(conn);<br> }<br> &#x2F;&#x2F;4.返回当前线程上的连接<br> return conn;<br> }catch (Exception e){<br> throw new RuntimeException(e);<br> }<br> }<br> &#x2F;</em>*</li>
<li>把连接和线程解绑<br>  <em>&#x2F;<br> public void removeConnection(){<br> tl.remove();<br> }<br>}<br><code> </code>java<br>package com.ecit.utils;<br>import org.aspectj.lang.ProceedingJoinPoint;<br>import org.aspectj.lang.annotation.Around;<br>import org.aspectj.lang.annotation.Aspect;<br>import org.aspectj.lang.annotation.Pointcut;<br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.stereotype.Component;<br>&#x2F;</em>*</li>
</ul>
</li>
<li>和事务管理相关的工具类，它包含了，开启事务，提交事务，回滚事务和释放连接<br> <em>&#x2F;<br>@Component(“txManager”)<br>@Aspect<br>public class TransactionManager {<br> @Autowired<br> private ConnectionUtils connectionUtils;<br> @Pointcut(“execution(</em> com.ecit.service.impl.<em>.</em>(..))”) &#x2F;&#x2F;注解方式的切入点<br> private void pt1(){}<br> &#x2F;**<ul>
<li>开启事务<br>  <em>&#x2F;<br> public  void beginTransaction(){<br> try {<br> connectionUtils.getThreadConnection().setAutoCommit(false);<br> }catch (Exception e){<br> e.printStackTrace();<br> }<br> }<br> &#x2F;</em>*</li>
<li>提交事务<br>  <em>&#x2F;<br> public  void commit(){<br> try {<br> connectionUtils.getThreadConnection().commit();<br> }catch (Exception e){<br> e.printStackTrace();<br> }<br> }<br> &#x2F;</em>*</li>
<li>回滚事务<br>  <em>&#x2F;<br> public  void rollback(){<br> try {<br> connectionUtils.getThreadConnection().rollback();<br> }catch (Exception e){<br> e.printStackTrace();<br> }<br> }<br> &#x2F;</em>*</li>
<li>释放连接<br>  *&#x2F;<br> public  void release(){<br> try {<br> connectionUtils.getThreadConnection().close();&#x2F;&#x2F;还回连接池中<br> connectionUtils.removeConnection();<br> }catch (Exception e){<br> e.printStackTrace();<br> }<br> }<br> @Around(“pt1()”) &#x2F;&#x2F;注解配置环绕通知<br> public Object aroundAdvice(ProceedingJoinPoint pjp){<br> Object rtValue &#x3D; null;<br> try {<br> &#x2F;&#x2F;1.获取参数<br> Object[] args &#x3D; pjp.getArgs();<br> &#x2F;&#x2F;2.开启事务<br> this.beginTransaction();<br> &#x2F;&#x2F;3.执行方法<br> rtValue &#x3D; pjp.proceed(args);<br> &#x2F;&#x2F;4.提交事务<br> this.commit();<br> &#x2F;&#x2F;返回结果<br> return  rtValue;<br> }catch (Throwable e){<br> &#x2F;&#x2F;5.回滚事务<br> this.rollback();<br> throw new RuntimeException(e);<br> }finally {<br> &#x2F;&#x2F;6.释放资源<br> this.release();<br> }<br> }<br>}<br>&#96;&#96;&#96;</li>
</ul>
</li>
</ul>
<ul>
<li>账户的实体类<br>&#96;&#96;&#96;java<br>package com.ecit.domain;<br>import lombok.Data;<br>import java.io.Serializable;<br>&#x2F;**</li>
</ul>
<ul>
<li>账户的实体类<br> *&#x2F;<br>@Data<br>public class Account implements Serializable {<br> private Integer id;<br> private String name;<br> private Float money;<br>}<br>&#96;&#96;&#96;</li>
</ul>
<ul>
<li>账户的DAO层<br>&#96;&#96;&#96;java<br>package com.ecit.dao;<br>import com.ecit.domain.Account;<br>import java.util.List;<br>&#x2F;**</li>
</ul>
<ul>
<li>账户的持久层接口<br> <em>&#x2F;<br>public interface IAccountDao {<br> &#x2F;</em>*<ul>
<li>查询所有</li>
<li>@return<br>  <em>&#x2F;<br> List<Account> findAllAccount();<br> &#x2F;</em>*</li>
<li>更新</li>
<li>@param account<br>  <em>&#x2F;<br> int updateAccount(Account account);<br> &#x2F;</em>*</li>
<li>根据名称查询账户</li>
<li>@param accountName</li>
<li>@return  如果有唯一的一个结果就返回，如果没有结果就返回null</li>
<li><pre><code>     如果结果集超过一个就抛异常
</code></pre>
  <em>&#x2F;<br> Account findAccountByName(String accountName);<br>}<br><code> </code>java<br>package com.ecit.dao.impl;<br>import com.ecit.dao.IAccountDao;<br>import com.ecit.domain.Account;<br>import com.ecit.utils.ConnectionUtils;<br>import org.apache.commons.dbutils.QueryRunner;<br>import org.apache.commons.dbutils.handlers.BeanListHandler;<br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.stereotype.Repository;<br>import java.util.List;<br>&#x2F;</em>*</li>
</ul>
</li>
<li>账户的持久层实现类<br> *&#x2F;<br>@Repository(“accountDao”)<br>public class AccountDaoImpl implements IAccountDao {<br> @Autowired<br> private QueryRunner runner;<br> @Autowired<br> private ConnectionUtils connectionUtils;<br> @Override<br> public List<Account> findAllAccount() {<br> try{<br>     return runner.query(connectionUtils.getThreadConnection(),”select * from account”,new BeanListHandler<Account>(Account.class));<br> }catch (Exception e) {<br>     throw new RuntimeException(e);<br> }<br> }<br> @Override<br> public int updateAccount(Account account) {<br> try{<br>    return runner.update(connectionUtils.getThreadConnection(),”update account set name&#x3D;?,money&#x3D;? where id&#x3D;?”,account.getName(),account.getMoney(),account.getId());<br> }catch (Exception e) {<br>     throw new RuntimeException(e);<br> }<br> }<br> @Override<br> public Account findAccountByName(String accountName) {<br> try{<br>     List<Account> accounts &#x3D; runner.query(connectionUtils.getThreadConnection(),”select * from account where name &#x3D; ?”,new BeanListHandler<Account>(Account.class),accountName);<br>     if(accounts &#x3D;&#x3D; null || accounts.size() &#x3D;&#x3D; 0){<br>         return null;<br>     }<br>     if(accounts.size() &gt; 1){<br>         throw new RuntimeException(“结果集不唯一，数据有问题”);<br>     }<br>     return accounts.get(0);<br> }catch (Exception e) {<br>     throw new RuntimeException(e);<br> }<br> }<br>}<br>&#96;&#96;&#96;</li>
</ul>
<ul>
<li>账户的业务层<br>&#96;&#96;&#96;java<br>package com.ecit.service;<br>import com.ecit.domain.Account;<br>import java.util.List;<br>&#x2F;**</li>
</ul>
<ul>
<li>账户的业务层接口<br> <em>&#x2F;<br>public interface IAccountService {<br> &#x2F;</em>*<ul>
<li>查询所有</li>
<li>@return<br>  <em>&#x2F;<br> List<Account> findAllAccount();<br> &#x2F;</em>*</li>
<li>转账</li>
<li>@param sourceName        转出账户名称</li>
<li>@param targetName        转入账户名称</li>
<li>@param money             转账金额<br>  *&#x2F;<br> void transfer(String sourceName,String targetName,Float money) throws Exception;<br>}<pre><code>```java
package com.ecit.service.impl;
import com.ecit.dao.IAccountDao;
import com.ecit.domain.Account;
import com.ecit.service.IAccountService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import java.util.List;
@Service(&quot;accountService&quot;)
public class AccountServiceImpl implements IAccountService &#123;
 @Autowired
 private IAccountDao accountDao;
 @Override
 public List&lt;Account&gt; findAllAccount() &#123;
 return accountDao.findAllAccount();
 &#125;
 @Override
 public void transfer(String sourceName, String targetName, Float money) throws Exception&#123;
 System.out.println(&quot;transfer....&quot;);
 //2.1根据名称查询转出账户
 Account source = accountDao.findAccountByName(sourceName);
 //2.2根据名称查询转入账户
 Account target = accountDao.findAccountByName(targetName);
 //2.3转出账户减钱
 source.setMoney(source.getMoney()-money);
 //2.4转入账户加钱
 target.setMoney(target.getMoney()+money);
 //2.5更新转出账户
 int res = accountDao.updateAccount(source);
 if (res==0)&#123;
     throw new RuntimeException(&quot;用户扣款异常&quot;);
 &#125;
// int i=1/0; 模拟出现异常，看出事务是否回滚
 //2.6更新转入账户
int res2 =  accountDao.updateAccount(target);
 if (res2==0)&#123;
     throw new RuntimeException(&quot;用户收款异常&quot;);
 &#125;
 &#125;
&#125;
</code></pre>
</li>
</ul>
</li>
</ul>
<ul>
<li>测试代码<pre><code class="line-numbers language-java">@Test
public void testTx() throws Exception &#123;
      //1.获取容器
      ApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-bean.xml&quot;);
      //2.获取对象
      IAccountService as = (IAccountService)ac.getBean(&quot;accountService&quot;);
      System.out.println(as);
      as.transfer(&quot;aa&quot;,&quot;bbb&quot;,100f);
&#125;
</code></pre>
</li>
</ul>
<h3 id="不依赖Spring-tx模块使用基于注解方式的aop示例-前置，后置，异常，最终通知注解方式实现的事务"><a href="#不依赖Spring-tx模块使用基于注解方式的aop示例-前置，后置，异常，最终通知注解方式实现的事务" class="headerlink" title="不依赖Spring-tx模块使用基于注解方式的aop示例:(前置，后置，异常，最终通知注解方式实现的事务)"></a>不依赖Spring-tx模块使用基于注解方式的aop示例:(前置，后置，异常，最终通知注解方式实现的事务)</h3><ul>
<li>同上依赖jar包，实体类，dao层，业务层,sping-bean.xml不变</li>
<li>改变 TransactionManager前置，后置，异常，最终通知<br>&#96;&#96;&#96;java<br>package com.ecit.utils;<br>import org.aspectj.lang.ProceedingJoinPoint;<br>import org.aspectj.lang.annotation.Around;<br>import org.aspectj.lang.annotation.Aspect;<br>import org.aspectj.lang.annotation.Pointcut;<br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.stereotype.Component;<br>&#x2F;**</li>
</ul>
<ul>
<li>和事务管理相关的工具类，它包含了，开启事务，提交事务，回滚事务和释放连接<br> <em>&#x2F;<br>@Component(“txManager”)<br>@Aspect<br>public class TransactionManager {<br> @Autowired<br> private ConnectionUtils connectionUtils;<br> @Pointcut(“execution(</em> com.ecit.service.impl.<em>.</em>(..))”) &#x2F;&#x2F;注解方式的切入点<br> private void pt1(){}<br> &#x2F;**<ul>
<li>开启事务<br>  <em>&#x2F;<br> @Before(“pt1()”) &#x2F;&#x2F;前置通知<br> public  void beginTransaction(){<br> try {<br> connectionUtils.getThreadConnection().setAutoCommit(false);<br> }catch (Exception e){<br> e.printStackTrace();<br> }<br> }<br> &#x2F;</em>*</li>
<li>提交事务<br>  <em>&#x2F;<br>  @AfterReturning(“pt1()”) &#x2F;&#x2F;后置通知<br> public  void commit(){<br> try {<br> connectionUtils.getThreadConnection().commit();<br> }catch (Exception e){<br> e.printStackTrace();<br> }<br> }<br> &#x2F;</em>*</li>
<li>回滚事务<br>  <em>&#x2F;<br>  @AfterThrowing(“pt1()”) &#x2F;&#x2F;异常通知<br> public  void rollback(){<br> try {<br> connectionUtils.getThreadConnection().rollback();<br> }catch (Exception e){<br> e.printStackTrace();<br> }<br> }<br> &#x2F;</em>*</li>
<li>释放连接<br>  *&#x2F;<br>  @After(“pt1()”) &#x2F;&#x2F;最终通知<br> public  void release(){<br> try {<br> connectionUtils.getThreadConnection().close();&#x2F;&#x2F;还回连接池中<br> connectionUtils.removeConnection();<br> }catch (Exception e){<br> e.printStackTrace();<br> }<br> }<br>}<br>&#96;&#96;&#96;</li>
</ul>
</li>
</ul>
<h3 id="不依赖Spring-tx模块使用基于XML的aop示例-环绕通知方式实现的事务"><a href="#不依赖Spring-tx模块使用基于XML的aop示例-环绕通知方式实现的事务" class="headerlink" title="不依赖Spring-tx模块使用基于XML的aop示例:(环绕通知方式实现的事务)"></a>不依赖Spring-tx模块使用基于XML的aop示例:(环绕通知方式实现的事务)</h3><ul>
<li>同上依赖jar包，实体类，dao层，业务层不变(去掉所有注解，添加getter方法)</li>
<li>改变sping-bean.xml<br>&#96;&#96;&#96;xml<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:aop="http://www.springframework.org/schema/aop"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/aop
  http://www.springframework.org/schema/aop/spring-aop.xsd">  <bean class= "org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
      <property name="location" value= "classpath:db-pro.properties"></property>
  </bean>
   <!-- 配置Service -->
  <bean id="accountService" class="com.ecit.service.impl.AccountServiceImpl">
      <!-- 注入dao -->
      <property name="accountDao" ref="accountDao"></property>
  </bean>
  <!--配置Dao对象-->
  <bean id="accountDao" class="com.ecit.dao.impl.AccountDaoImpl">
      <!-- 注入QueryRunner -->
      <property name="runner" ref="runner"></property>
      <!-- 注入ConnectionUtils -->
      <property name="connectionUtils" ref="connectionUtils"></property>
  </bean>
  <!--配置QueryRunner-->
  <bean id="runner" class="org.apache.commons.dbutils.QueryRunner" scope="prototype"></bean>

  <!-- 配置数据源 -->
  <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
      <!--连接数据库的必备信息-->
      <property name="driverClass" value="${jdbc.driver}"></property>
      <property name="jdbcUrl" value="${jdbc.url}"></property>
      <property name="user" value="${jdbc.username}"></property>
      <property name="password" value="${jdbc.password}"></property>
  </bean>
  <!-- 配置Connection的工具类 ConnectionUtils -->
  <bean id="connectionUtils" class="com.ecit.utils.ConnectionUtils">
      <!-- 注入数据源-->
      <property name="dataSource" ref="dataSource"></property>
  </bean>
  <!-- 配置事务管理器-->
  <bean id="txManager" class="com.ecit.utils.TransactionManager">
      <!-- 注入ConnectionUtils -->
      <property name="connectionUtils" ref="connectionUtils"></property>
  </bean>
  <!--配置aop-->
  <aop:config>
      <!--配置通用切入点表达式-->
      <aop:pointcut id="pt1" expression="execution(* com.ecit.service.impl.*.*(..))"></aop:pointcut>
      <aop:aspect id="txAdvice" ref="txManager">
          <!-- 配置环绕通知 -->
          <aop:around method="aroundAdvice" pointcut-ref="pt1"/>
      </aop:aspect>
  </aop:config></li>
</ul>
</beans>
```

<h3 id="不依赖Spring-tx模块使用基于XML的aop示例-前置，后置，异常，最终通知方式实现的事务"><a href="#不依赖Spring-tx模块使用基于XML的aop示例-前置，后置，异常，最终通知方式实现的事务" class="headerlink" title="不依赖Spring-tx模块使用基于XML的aop示例:(前置，后置，异常，最终通知方式实现的事务)"></a>不依赖Spring-tx模块使用基于XML的aop示例:(前置，后置，异常，最终通知方式实现的事务)</h3><ul>
<li>同上依赖jar包，实体类，dao层，业务层不变(去掉所有注解，添加getter方法)</li>
<li>改变sping-bean.xml<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
     xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
     xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans.xsd
      http://www.springframework.org/schema/aop
      http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
  &lt;bean class= &quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;
      &lt;property name=&quot;location&quot; value= &quot;classpath:db-pro.properties&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
   &lt;!-- 配置Service --&gt;
  &lt;bean id=&quot;accountService&quot; class=&quot;com.ecit.service.impl.AccountServiceImpl&quot;&gt;
      &lt;!-- 注入dao --&gt;
      &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!--配置Dao对象--&gt;
  &lt;bean id=&quot;accountDao&quot; class=&quot;com.ecit.dao.impl.AccountDaoImpl&quot;&gt;
      &lt;!-- 注入QueryRunner --&gt;
      &lt;property name=&quot;runner&quot; ref=&quot;runner&quot;&gt;&lt;/property&gt;
      &lt;!-- 注入ConnectionUtils --&gt;
      &lt;property name=&quot;connectionUtils&quot; ref=&quot;connectionUtils&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!--配置QueryRunner--&gt;
  &lt;bean id=&quot;runner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;
  &lt;!-- 配置数据源 --&gt;
  &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
      &lt;!--连接数据库的必备信息--&gt;
      &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!-- 配置Connection的工具类 ConnectionUtils --&gt;
  &lt;bean id=&quot;connectionUtils&quot; class=&quot;com.ecit.utils.ConnectionUtils&quot;&gt;
      &lt;!-- 注入数据源--&gt;
      &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!-- 配置事务管理器--&gt;
  &lt;bean id=&quot;txManager&quot; class=&quot;com.ecit.utils.TransactionManager&quot;&gt;
      &lt;!-- 注入ConnectionUtils --&gt;
      &lt;property name=&quot;connectionUtils&quot; ref=&quot;connectionUtils&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!--配置aop--&gt;
  &lt;aop:config&gt;
      &lt;!--配置通用切入点表达式--&gt;
      &lt;aop:pointcut id=&quot;pt1&quot; expression=&quot;execution(* com.ecit.service.impl.*.*(..))&quot;&gt;&lt;/aop:pointcut&gt;
      &lt;aop:aspect id=&quot;txAdvice&quot; ref=&quot;txManager&quot;&gt;
          &lt;!--配置前置通知：开启事务--&gt;
          &lt;aop:before method=&quot;beginTransaction&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:before&gt;
          &lt;!--配置后置通知：提交事务--&gt;
          &lt;aop:after-returning method=&quot;commit&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:after-returning&gt;
          &lt;!--配置异常通知：回滚事务--&gt;
          &lt;aop:after-throwing method=&quot;rollback&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:after-throwing&gt;
          &lt;!--配置最终通知：释放连接--&gt;
          &lt;aop:after method=&quot;release&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:after&gt;
      &lt;/aop:aspect&gt;
  &lt;/aop:config&gt;
&lt;/beans&gt;
</code></pre>
</li>
</ul>
<h2 id="Spring内置的事务管理器-spring-tx-配置AOP"><a href="#Spring内置的事务管理器-spring-tx-配置AOP" class="headerlink" title="Spring内置的事务管理器(spring-tx)配置AOP"></a>Spring内置的事务管理器(spring-tx)配置AOP</h2><h3 id="spring-tx基于XML配置AOP"><a href="#spring-tx基于XML配置AOP" class="headerlink" title="spring-tx基于XML配置AOP"></a>spring-tx基于XML配置AOP</h3><ul>
<li>用到的所有依赖<pre><code class="line-numbers language-xml">&lt;dependencies&gt;
  &lt;!--bean的get set简化--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
      &lt;artifactId&gt;lombok&lt;/artifactId&gt;
      &lt;version&gt;1.18.12&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--spring框架核心的依赖--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
      &lt;version&gt;4.3.12.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--aop用到的依赖--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;
      &lt;version&gt;4.3.12.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;aopalliance&lt;/groupId&gt;
      &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;
      &lt;version&gt;1.0&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
      &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
      &lt;version&gt;1.8.7&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--Spring内置封装的JDBC操作工具类,数据库连接池--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
      &lt;version&gt;4.3.12.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--Spring内置的事物管理--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;
      &lt;version&gt;4.3.12.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--mysql数据库驱动--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;mysql&lt;/groupId&gt;
      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
      &lt;version&gt;5.1.45&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--纯JUnit测试包--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;4.12&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;!--日志框架--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;log4j&lt;/groupId&gt;
      &lt;artifactId&gt;log4j&lt;/artifactId&gt;
      &lt;version&gt;1.2.12&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
</li>
<li>实体类<br>&#96;&#96;&#96;java<br>package com.ecit.domain;<br>import lombok.Data;<br>import java.io.Serializable;<br>&#x2F;**</li>
</ul>
<ul>
<li>账户的实体类<br> *&#x2F;<br>@Data<br>public class Account implements Serializable {<br> private Integer id;<br> private String name;<br> private Float money;<br>}<br>&#96;&#96;&#96;</li>
</ul>
<ul>
<li>dao层<br>&#96;&#96;&#96;java<br>package com.ecit.dao;<br>import com.ecit.domain.Account;<br>&#x2F;**</li>
</ul>
<ul>
<li><p>账户的持久层接口<br> <em>&#x2F;<br>public interface IAccountDao {<br> &#x2F;</em>*</p>
<ul>
<li>根据Id查询账户</li>
<li>@param accountId</li>
<li>@return<br>  <em>&#x2F;<br> Account findAccountById(Integer accountId);<br> &#x2F;</em>*</li>
<li>根据名称查询账户</li>
<li>@param accountName</li>
<li>@return<br>  *&#x2F;<br> Account findAccountByName(String accountName);</li>
</ul>
<p> &#x2F;**</p>
<ul>
<li>更新账户</li>
<li>@param account<br>  *&#x2F;<br> void updateAccount(Account account);</li>
</ul>
</li>
</ul>
<p>}</p>
<pre><code>```java
package com.ecit.dao.impl;
import com.ecit.dao.IAccountDao;
import com.ecit.domain.Account;
import org.springframework.jdbc.core.BeanPropertyRowMapper;
import org.springframework.jdbc.core.support.JdbcDaoSupport;
import java.util.List;
/**
 * 账户的持久层实现类
 */
public class AccountDaoImpl extends JdbcDaoSupport implements IAccountDao &#123;
    @Override
    public Account findAccountById(Integer accountId) &#123;
        List&lt;Account&gt; accounts = super.getJdbcTemplate().query(&quot;select * from account where id = ?&quot;,new BeanPropertyRowMapper&lt;Account&gt;(Account.class),accountId);
        return accounts.isEmpty()?null:accounts.get(0);
    &#125;
    @Override
    public Account findAccountByName(String accountName) &#123;
        List&lt;Account&gt; accounts = super.getJdbcTemplate().query(&quot;select * from account where name = ?&quot;,new BeanPropertyRowMapper&lt;Account&gt;(Account.class),accountName);
        if(accounts.isEmpty())&#123;
            return null;
        &#125;
        if(accounts.size()&gt;1)&#123;
            throw new RuntimeException(&quot;结果集不唯一&quot;);
        &#125;
        return accounts.get(0);
    &#125;
    @Override
    public void updateAccount(Account account) &#123;
        super.getJdbcTemplate().update(&quot;update account set name=?,money=? where id=?&quot;,account.getName(),account.getMoney(),account.getId());
    &#125;
&#125;
</code></pre>
<ul>
<li>业务层<br>&#96;&#96;&#96;java<br>package com.ecit.service;<br>import com.ecit.domain.Account;<br>&#x2F;**</li>
</ul>
<ul>
<li>账户的业务层接口<br> <em>&#x2F;<br>public interface IAccountService {<br> &#x2F;</em>*<ul>
<li>根据id查询账户信息</li>
<li>@param accountId</li>
<li>@return<br>  <em>&#x2F;<br> Account findAccountById(Integer accountId);<br> &#x2F;</em>*</li>
<li>转账</li>
<li>@param sourceName    转成账户名称</li>
<li>@param targetName    转入账户名称</li>
<li>@param money         转账金额<br>  <em>&#x2F;<br> void transfer(String sourceName,String targetName,Float money);<br>}<br><code> </code>java<br>package com.ecit.service.impl;<br>import com.ecit.dao.IAccountDao;<br>import com.ecit.domain.Account;<br>import com.ecit.service.IAccountService;<br>import lombok.Data;<br>&#x2F;</em>*</li>
</ul>
</li>
<li>账户的业务层实现类</li>
<li></li>
<li>事务控制应该都是在业务层<br> *&#x2F;<br>@Data<br>public class AccountServiceImpl implements IAccountService {<br> private IAccountDao accountDao;<br> public void setAccountDao(IAccountDao accountDao) {<br> this.accountDao &#x3D; accountDao;<br> }<br> @Override<br> public Account findAccountById(Integer accountId) {<br> return accountDao.findAccountById(accountId);<br> }<br> @Override<br> public void transfer(String sourceName, String targetName, Float money) {<br> System.out.println(“transfer….”);<br> &#x2F;&#x2F;2.1根据名称查询转出账户<br> Account source &#x3D; accountDao.findAccountByName(sourceName);<br> &#x2F;&#x2F;2.2根据名称查询转入账户<br> Account target &#x3D; accountDao.findAccountByName(targetName);<br> &#x2F;&#x2F;2.3转出账户减钱<br> source.setMoney(source.getMoney()-money);<br> &#x2F;&#x2F;2.4转入账户加钱<br> target.setMoney(target.getMoney()+money);<br> &#x2F;&#x2F;2.5更新转出账户<br> accountDao.updateAccount(source);<br> &#x2F;&#x2F;int i&#x3D;1&#x2F;0; &#x2F;&#x2F;模拟异常事务回滚<br> &#x2F;&#x2F;2.6更新转入账户<br> accountDao.updateAccount(target);<br> }</li>
</ul>
<p>}</p>
<pre><code>- spring-bean.xml配置文件
```xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;
    &lt;context:property-placeholder location=&quot;db-pro.properties&quot; /&gt;
    &lt;!-- 配置业务层--&gt;
    &lt;bean id=&quot;accountService&quot; class=&quot;com.ecit.service.impl.AccountServiceImpl&quot;&gt;
        &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;!-- 配置账户的持久层--&gt;
    &lt;bean id=&quot;accountDao&quot; class=&quot;com.ecit.dao.impl.AccountDaoImpl&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;!-- 配置数据源--&gt;
    &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;
        &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;!-- spring中基于XML的声明式事务控制配置步骤
        1、配置事务管理器
        2、配置事务的通知
                此时我们需要导入事务的约束 tx名称空间和约束，同时也需要aop的
                使用tx:advice标签配置事务通知
                    属性：
                        id：给事务通知起一个唯一标识
                        transaction-manager：给事务通知提供一个事务管理器引用
        3、配置AOP中的通用切入点表达式
        4、建立事务通知和切入点表达式的对应关系
        5、配置事务的属性
               是在事务的通知tx:advice标签的内部
     --&gt;
    &lt;!-- 配置事务管理器 --&gt;
    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;!-- 配置事务的通知--&gt;
    &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;
        &lt;!-- 配置事务的属性
                isolation：用于指定事务的隔离级别。默认值是DEFAULT，表示使用数据库的默认隔离级别。
                propagation：用于指定事务的传播行为。默认值是REQUIRED，表示一定会有事务，增删改的选择。查询方法可以选择SUPPORTS。
                read-only：用于指定事务是否只读。只有查询方法才能设置为true。默认值是false，表示读写。
                timeout：用于指定事务的超时时间，默认值是-1，表示永不超时。如果指定了数值，以秒为单位。
                rollback-for：用于指定一个异常，当产生该异常时，事务回滚，产生其他异常时，事务不回滚。没有默认值。表示任何异常都回滚。
                no-rollback-for：用于指定一个异常，当产生该异常时，事务不回滚，产生其他异常时事务回滚。没有默认值。表示任何异常都回滚。
        --&gt;
        &lt;tx:attributes&gt;
            &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot; read-only=&quot;false&quot; isolation=&quot;READ_COMMITTED&quot;/&gt;
            &lt;tx:method name=&quot;find*&quot; propagation=&quot;SUPPORTS&quot; read-only=&quot;true&quot; isolation=&quot;READ_COMMITTED&quot;/&gt;
        &lt;/tx:attributes&gt;
    &lt;/tx:advice&gt;
    &lt;!-- 配置aop--&gt;
    &lt;aop:config&gt;
        &lt;!-- 配置切入点表达式--&gt;
        &lt;aop:pointcut id=&quot;pt1&quot; expression=&quot;execution(* com.ecit.service.impl.*.*(..))&quot;&gt;&lt;/aop:pointcut&gt;
        &lt;!--建立切入点表达式和事务通知的对应关系 --&gt;
        &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:advisor&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;
</code></pre>
<ul>
<li>测试<pre><code class="line-numbers language-java">@Test
public void testTx() throws Exception &#123;
      //1.获取容器
      ApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-bean.xml&quot;);
      //2.获取对象
      IAccountService as = (IAccountService)ac.getBean(&quot;accountService&quot;);
      System.out.println(as);
      as.transfer(&quot;aaa&quot;,&quot;bbb&quot;,100f);
&#125;
</code></pre>
<h3 id="spring-tx基于注解配置AOP"><a href="#spring-tx基于注解配置AOP" class="headerlink" title="spring-tx基于注解配置AOP"></a>spring-tx基于注解配置AOP</h3></li>
<li>jar依赖不变，实体不变</li>
<li>spring-bean.xml修改<pre><code class="line-numbers language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
     xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
     xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
     xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
     xsi:schemaLocation=&quot;
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans.xsd
      http://www.springframework.org/schema/tx
      http://www.springframework.org/schema/tx/spring-tx.xsd
      http://www.springframework.org/schema/aop
      http://www.springframework.org/schema/aop/spring-aop.xsd
      http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;
  &lt;!-- 配置spring创建容器时要扫描的包--&gt;
  &lt;context:component-scan base-package=&quot;com.itheima&quot;&gt;&lt;/context:component-scan&gt;
  &lt;!-- 配置JdbcTemplate--&gt;
  &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;
      &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!-- 配置数据源--&gt;
  &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;
      &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/testDB&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;
      &lt;property name=&quot;password&quot; value=&quot;1234&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!-- spring中基于注解 的声明式事务控制配置步骤
      1、配置事务管理器
      2、开启spring对注解事务的支持
      3、在需要事务支持的地方使用@Transactional注解
   --&gt;
  &lt;!-- 配置事务管理器 --&gt;
  &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
      &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
  &lt;/bean&gt;
  &lt;!-- 开启spring对注解事务的支持--&gt;
  &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;
&lt;/beans&gt;
</code></pre>
</li>
<li>dao改变<pre><code class="line-numbers language-java">@Repository(&quot;accountDao&quot;)
public class AccountDaoImpl implements IAccountDao &#123;
  @Autowired
  private JdbcTemplate jdbcTemplate;
  @Override
  public Account findAccountById(Integer accountId) &#123;
      List&lt;Account&gt; accounts = jdbcTemplate.query(&quot;select * from account where id = ?&quot;,new BeanPropertyRowMapper&lt;Account&gt;(Account.class),accountId);
      return accounts.isEmpty()?null:accounts.get(0);
  &#125;
  @Override
  public Account findAccountByName(String accountName) &#123;
      List&lt;Account&gt; accounts = jdbcTemplate.query(&quot;select * from account where name = ?&quot;,new BeanPropertyRowMapper&lt;Account&gt;(Account.class),accountName);
      if(accounts.isEmpty())&#123;
          return null;
      &#125;
      if(accounts.size()&gt;1)&#123;
          throw new RuntimeException(&quot;结果集不唯一&quot;);
      &#125;
      return accounts.get(0);
  &#125;
  @Override
  public void updateAccount(Account account) &#123;
      jdbcTemplate.update(&quot;update account set name=?,money=? where id=?&quot;,account.getName(),account.getMoney(),account.getId());
  &#125;
&#125;
</code></pre>
</li>
<li>业务层改变<br>&#96;&#96;&#96;java<br>@Service(“accountService”)<br>@Transactional(propagation&#x3D; Propagation.SUPPORTS,readOnly&#x3D;true)&#x2F;&#x2F;只读型事务的配置<br>public class AccountServiceImpl implements IAccountService{<br>  @Autowired<br>  private IAccountDao accountDao;<br>  @Override<br>  public Account findAccountById(Integer accountId) {<br>  return accountDao.findAccountById(accountId);<br>  }<br>  &#x2F;&#x2F;需要的是读写型事务配置<br>  @Transactional(propagation&#x3D; Propagation.REQUIRED,readOnly&#x3D;false)<br>  @Override<br>  public void transfer(String sourceName, String targetName, Float money) {<br>  System.out.println(“transfer….”);<br>      &#x2F;&#x2F;2.1根据名称查询转出账户<br>      Account source &#x3D; accountDao.findAccountByName(sourceName);<br>      &#x2F;&#x2F;2.2根据名称查询转入账户<br>      Account target &#x3D; accountDao.findAccountByName(targetName);<br>      &#x2F;&#x2F;2.3转出账户减钱<br>      source.setMoney(source.getMoney()-money);<br>      &#x2F;&#x2F;2.4转入账户加钱<br>      target.setMoney(target.getMoney()+money);<br>      &#x2F;&#x2F;2.5更新转出账户<br>      accountDao.updateAccount(source);<br><br>      int i&#x3D;1&#x2F;0; &#x2F;&#x2F;模拟异常，事务回滚<br><br>      &#x2F;&#x2F;2.6更新转入账户<br>      accountDao.updateAccount(target);<br>  }</li>
</ul>
<p>}</p>
<pre><code>## Spring 支持的事务传播行为

|传播属性|描述|
|:----:|:----:|
|REQUIRED|如果有事务在运行，当前的方法就在这个事务内运行，否则，就启动一个新的事务，并在自己的事务内运行|
|REQUIRED_NEW|当前的方法必须启动新事务，并在它自己的事务内运行.如果有事务正在运行，应该将它挂起|
|SUPPORTS|如果有事务在运行，当前的方法就在这个事务内运行.否则它可以不运行在事务中.|
|NOT_ SUPPORTED|当前的方法不应该运行在事务中.如果有运行的事务，将它挂起|
|MANDATORY|当前的方法必须运行在事务内部，如果没有正在运行的事务，就抛出异常|
|NEVER|当前的方法不应该运行在事务中.如果有运行的事务，就抛出异常|
|NESTED|如果有事务在运行，当前的方法就应该在这个事务的嵌套事务内运行.否则，就启动一个新的事务，并在它自己的事务内运行.|
</code></pre>
</div><div class="article-licensing box"><div class="licensing-title"><p>Spring框架-AOP</p><p><a href="http://example.com/2013/11/09/framework/spring/spring框架-AOP/">http://example.com/2013/11/09/framework/spring/spring框架-AOP/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>sxm-star</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2013-11-09</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2020-07-13</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2013/11/11/framework/spring/spring%E6%A1%86%E6%9E%B6-%E6%95%B4%E5%90%88%E5%85%B6%E4%BB%96%E6%A1%86%E6%9E%B6/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Spring框架-整合其它框架</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2013/11/08/framework/spring/spring%E6%A1%86%E6%9E%B6-IOC/"><span class="level-item">Spring框架-IOC</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn.jsdelivr.net/npm/leancloud-storage@3/dist/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.16/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread',
            appId: "IfrP2z24klBnzSqFsYHnXGcR-gzGzoHsz",
            appKey: "oc5OS3irrT5ytSoVIXaSFDxI",
            placeholder: "请留言...",
            avatar: "mm",
            avatarForce: false,
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: false,
            highlight: true,
            recordIP: false,
            
            
            
            enableQQ: false,
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="sxm-star"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">sxm-star</p><p class="is-size-6 is-block">见路非路,即见因果,见相非相,即见如来</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Asia</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">199</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">95</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">62</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget"><link href="/music/APlayer.min.css"><div id="aplayer" style="margin: 0 auto;"></div><script src="/music/APlayer.min.js"></script><script src="/music/APlayer_Music.js"></script></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#AOP介绍"><span class="level-left"><span class="level-item">1</span><span class="level-item">AOP介绍</span></span></a></li><li><a class="level is-mobile" href="#AOP编程术语"><span class="level-left"><span class="level-item">2</span><span class="level-item">AOP编程术语</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#切面-Aspect"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">切面 (Aspect)</span></span></a></li><li><a class="level is-mobile" href="#织入（Weaving）"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">织入（Weaving）</span></span></a></li><li><a class="level is-mobile" href="#连接点（-Joinpoint）"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">连接点（ Joinpoint）</span></span></a></li><li><a class="level is-mobile" href="#切入点（-Pointcut）"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">切入点（ Pointcut）</span></span></a></li><li><a class="level is-mobile" href="#目标对象（-Target）"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">目标对象（ Target）</span></span></a></li><li><a class="level is-mobile" href="#通知（-Advice）"><span class="level-left"><span class="level-item">2.6</span><span class="level-item">通知（ Advice）</span></span></a></li><li><a class="level is-mobile" href="#顾问（-Advisor）"><span class="level-left"><span class="level-item">2.7</span><span class="level-item">顾问（ Advisor）</span></span></a></li></ul></li><li><a class="level is-mobile" href="#通知详解"><span class="level-left"><span class="level-item">3</span><span class="level-item">通知详解</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#前置通知-Methodbeforeadvice"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">前置通知 Methodbeforeadvice</span></span></a></li><li><a class="level is-mobile" href="#后置通知-AfterReturningAdvice"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">后置通知 AfterReturningAdvice</span></span></a></li><li><a class="level is-mobile" href="#环绕通知-Methodlnterceptor"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">环绕通知 Methodlnterceptor</span></span></a></li><li><a class="level is-mobile" href="#异常通知"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">异常通知</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#异常通知注意点"><span class="level-left"><span class="level-item">3.4.1</span><span class="level-item">异常通知注意点</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#顾问-Advisor"><span class="level-left"><span class="level-item">4</span><span class="level-item">顾问 Advisor</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#名称匹配方法切入点顾问"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">名称匹配方法切入点顾问</span></span></a></li></ul></li><li><a class="level is-mobile" href="#自动代理生成器-解决ProxyFactoryBean的问题一次只能代理一个bean"><span class="level-left"><span class="level-item">5</span><span class="level-item">自动代理生成器 解决ProxyFactoryBean的问题一次只能代理一个bean</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#默认advisor自动代理生成器"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">默认advisor自动代理生成器</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#问题"><span class="level-left"><span class="level-item">5.1.1</span><span class="level-item">问题</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Bean名称自动代理生成器"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">Bean名称自动代理生成器</span></span></a></li></ul></li><li><a class="level is-mobile" href="#AspectJ-对AOP的实现–基于注解方式"><span class="level-left"><span class="level-item">6</span><span class="level-item">AspectJ 对AOP的实现–基于注解方式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#AspectJ简介"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">AspectJ简介</span></span></a></li><li><a class="level is-mobile" href="#AspectJ开发环境"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">AspectJ开发环境</span></span></a></li></ul></li><li><a class="level is-mobile" href="#AspectJ-对AOP的实现–基于XML方式"><span class="level-left"><span class="level-item">7</span><span class="level-item">AspectJ 对AOP的实现–基于XML方式</span></span></a></li><li><a class="level is-mobile" href="#AOP实战例子-数据库事务"><span class="level-left"><span class="level-item">8</span><span class="level-item">AOP实战例子-数据库事务</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#不依赖Spring-tx模块使用基于注解方式的aop示例-环绕注解方式实现的事务"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">不依赖Spring-tx模块使用基于注解方式的aop示例:(环绕注解方式实现的事务)</span></span></a></li><li><a class="level is-mobile" href="#不依赖Spring-tx模块使用基于注解方式的aop示例-前置，后置，异常，最终通知注解方式实现的事务"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">不依赖Spring-tx模块使用基于注解方式的aop示例:(前置，后置，异常，最终通知注解方式实现的事务)</span></span></a></li><li><a class="level is-mobile" href="#不依赖Spring-tx模块使用基于XML的aop示例-环绕通知方式实现的事务"><span class="level-left"><span class="level-item">8.3</span><span class="level-item">不依赖Spring-tx模块使用基于XML的aop示例:(环绕通知方式实现的事务)</span></span></a></li><li><a class="level is-mobile" href="#不依赖Spring-tx模块使用基于XML的aop示例-前置，后置，异常，最终通知方式实现的事务"><span class="level-left"><span class="level-item">8.4</span><span class="level-item">不依赖Spring-tx模块使用基于XML的aop示例:(前置，后置，异常，最终通知方式实现的事务)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Spring内置的事务管理器-spring-tx-配置AOP"><span class="level-left"><span class="level-item">9</span><span class="level-item">Spring内置的事务管理器(spring-tx)配置AOP</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#spring-tx基于XML配置AOP"><span class="level-left"><span class="level-item">9.1</span><span class="level-item">spring-tx基于XML配置AOP</span></span></a></li><li><a class="level is-mobile" href="#spring-tx基于注解配置AOP"><span class="level-left"><span class="level-item">9.2</span><span class="level-item">spring-tx基于注解配置AOP</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/C%E8%AF%AD%E8%A8%80/"><span class="level-start"><span class="level-item">C语言</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Groovy/"><span class="level-start"><span class="level-item">Groovy</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVAEE/"><span class="level-start"><span class="level-item">JAVAEE</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/"><span class="level-start"><span class="level-item">JAVASE</span></span><span class="level-end"><span class="level-item tag">49</span></span></a><ul><li><a class="level is-mobile" href="/categories/JAVASE/IO%E6%B5%81/"><span class="level-start"><span class="level-item">IO流</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/JDBC/"><span class="level-start"><span class="level-item">JDBC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E5%9B%BD%E9%99%85%E5%8C%96%E5%BA%94%E7%94%A8/"><span class="level-start"><span class="level-item">国际化应用</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2/"><span class="level-start"><span class="level-item">图形界面</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"><span class="level-start"><span class="level-item">基础语法</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><span class="level-start"><span class="level-item">多线程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%BA%93/"><span class="level-start"><span class="level-item">常用类库</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6/"><span class="level-start"><span class="level-item">异常机制</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E6%96%B0%E7%89%B9%E6%80%A7/"><span class="level-start"><span class="level-item">新特性</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"><span class="level-start"><span class="level-item">网络编程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="level-start"><span class="level-item">设计模式</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E9%98%9F%E5%88%97%E4%B8%8E%E6%A0%88/"><span class="level-start"><span class="level-item">队列与栈</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E9%9B%86%E5%90%88/"><span class="level-start"><span class="level-item">集合</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><span class="level-start"><span class="level-item">面向对象</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVASE/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/"><span class="level-start"><span class="level-item">高级特性</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JVM/"><span class="level-start"><span class="level-item">JVM</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/JavaScript/"><span class="level-start"><span class="level-item">JavaScript</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/MAC/"><span class="level-start"><span class="level-item">MAC</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/MAC/Homebrew/"><span class="level-start"><span class="level-item">Homebrew</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/MAC/%E5%BD%A9%E8%9B%8B%E9%97%B2%E8%81%8A/"><span class="level-start"><span class="level-item">彩蛋闲聊</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/PHP/"><span class="level-start"><span class="level-item">PHP</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/PHP/%E6%95%B4%E4%BD%93%E4%BA%86%E8%A7%A3/"><span class="level-start"><span class="level-item">整体了解</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/docker/"><span class="level-start"><span class="level-item">docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/node/"><span class="level-start"><span class="level-item">node</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/react-native/"><span class="level-start"><span class="level-item">react native</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%B8%9A%E5%8A%A1%E9%A2%86%E5%9F%9F/"><span class="level-start"><span class="level-item">业务领域</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"><span class="level-start"><span class="level-item">中间件</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/NFS%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">NFS网络文件系统</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/"><span class="level-start"><span class="level-item">nginx</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/nosql/"><span class="level-start"><span class="level-item">nosql</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/nosql/redis/"><span class="level-start"><span class="level-item">redis</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6-RocketMQ/"><span class="level-start"><span class="level-item">消息中间件-RocketMQ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E4%BA%A7%E5%93%81%E5%BF%83%E5%BE%97/"><span class="level-start"><span class="level-item">产品心得</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">17</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/CSS/"><span class="level-start"><span class="level-item">CSS</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/HTML/"><span class="level-start"><span class="level-item">HTML</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/HTML/%E5%90%8E%E5%8F%B0%E6%A8%A1%E6%9D%BF/"><span class="level-start"><span class="level-item">后台模板</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/JavaScript/"><span class="level-start"><span class="level-item">JavaScript</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/Vue/"><span class="level-start"><span class="level-item">Vue</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/XML/"><span class="level-start"><span class="level-item">XML</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/bootstrap/"><span class="level-start"><span class="level-item">bootstrap</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/react/"><span class="level-start"><span class="level-item">react</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">项目构建工具</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/"><span class="level-start"><span class="level-item">前端项目</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E5%B9%B3%E5%8F%B0%E6%A1%88%E4%BE%8B/"><span class="level-start"><span class="level-item">在线教育平台案例</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%AE%89%E5%8D%93/"><span class="level-start"><span class="level-item">安卓</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">工具</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%B7%A5%E5%85%B7/Photoshop/"><span class="level-start"><span class="level-item">Photoshop</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B7%A5%E5%85%B7/gradle/"><span class="level-start"><span class="level-item">gradle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%BB%BA%E6%A8%A1/"><span class="level-start"><span class="level-item">建模</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%BB%BA%E6%A8%A1/UML/"><span class="level-start"><span class="level-item">UML</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/"><span class="level-start"><span class="level-item">微信开放平台</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><span class="level-start"><span class="level-item">微信小程序</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/"><span class="level-start"><span class="level-item">微信支付</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"><span class="level-start"><span class="level-item">微服务</span></span><span class="level-end"><span class="level-item tag">15</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/SpringCloud/"><span class="level-start"><span class="level-item">SpringCloud</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/springboot%E6%A1%86%E6%9E%B6/"><span class="level-start"><span class="level-item">springboot框架</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"><span class="level-start"><span class="level-item">MySQL</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%B5%8C%E5%85%A5%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">嵌入式数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%B1%82/"><span class="level-start"><span class="level-item">数据持久层</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%B1%82/commons-dbutils%E5%B7%A5%E5%85%B7%E7%B1%BB/"><span class="level-start"><span class="level-item">commons-dbutils工具类</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%B1%82/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/"><span class="level-start"><span class="level-item">数据库连接池</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="level-start"><span class="level-item">数据结构</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A6%82%E8%AE%BA%E5%92%8C%E5%A4%8D%E6%9D%82%E5%BA%A6/"><span class="level-start"><span class="level-item">概论和复杂度</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/"><span class="level-start"><span class="level-item">框架</span></span><span class="level-end"><span class="level-item tag">14</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/SpringBatch/"><span class="level-start"><span class="level-item">SpringBatch</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/SpringMVC/"><span class="level-start"><span class="level-item">SpringMVC</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/spring/"><span class="level-start"><span class="level-item">spring</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/"><span class="level-start"><span class="level-item">全文检索</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/lucene/"><span class="level-start"><span class="level-item">lucene</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/solr/"><span class="level-start"><span class="level-item">solr</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6/"><span class="level-start"><span class="level-item">安全框架</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6/shiro/"><span class="level-start"><span class="level-item">shiro</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6/spring-security/"><span class="level-start"><span class="level-item">spring-security</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%B1%82/"><span class="level-start"><span class="level-item">数据持久层</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%A1%86%E6%9E%B6/%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%B1%82/mybatis%E6%A1%86%E6%9E%B6/"><span class="level-start"><span class="level-item">mybatis框架</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%B5%8B%E8%AF%95%E4%B8%93%E6%A0%8F/"><span class="level-start"><span class="level-item">测试专栏</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"><span class="level-start"><span class="level-item">网络爬虫</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%8B%B1%E8%AF%AD%E5%A4%A9%E5%9C%B0/"><span class="level-start"><span class="level-item">英语天地</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">计算机原理</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/%E6%B1%87%E7%BC%96/"><span class="level-start"><span class="level-item">汇编</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="level-start"><span class="level-item">设计模式</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"><span class="level-start"><span class="level-item">结构型模式</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"><span class="level-start"><span class="level-item">行为型模式</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"><span class="level-start"><span class="level-item">软件设计</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9A%8F%E7%AC%94/"><span class="level-start"><span class="level-item">随笔</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E9%9A%8F%E7%AC%94/%E5%8F%B3%E8%84%91%E5%BC%80%E5%8F%91/"><span class="level-start"><span class="level-item">右脑开发</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E9%A1%B9%E7%9B%AE/"><span class="level-start"><span class="level-item">项目</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E7%AE%A1%E7%90%86/"><span class="level-start"><span class="level-item">项目构建管理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E7%AE%A1%E7%90%86/JUnit/"><span class="level-start"><span class="level-item">JUnit</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-12-01T13:12:06.000Z">2020-12-01</time></p><p class="title"><a href="/2020/12/01/%E6%B1%87%E7%BC%96/%E6%B5%85%E8%B0%88%E8%BE%85%E5%8A%A9/">浅谈辅助</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/">计算机原理</a> / <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/%E6%B1%87%E7%BC%96/">汇编</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-01T13:12:06.000Z">2020-11-01</time></p><p class="title"><a href="/2020/11/01/%E6%B1%87%E7%BC%96/review-%E6%B1%87%E7%BC%96/">重温汇编</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/">计算机原理</a> / <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/%E6%B1%87%E7%BC%96/">汇编</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-20T08:52:17.000Z">2020-10-20</time></p><p class="title"><a href="/2020/10/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%80%E7%AF%87/">重温数据结构--概论和复杂度</a></p><p class="categories"><a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a> / <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A6%82%E8%AE%BA%E5%92%8C%E5%A4%8D%E6%9D%82%E5%BA%A6/">概论和复杂度</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-07-06T06:00:00.000Z">2020-07-06</time></p><p class="title"><a href="/2020/07/06/%E9%9A%8F%E7%AC%94/%E5%8F%B3%E8%84%91%E5%BC%80%E5%8F%91/">右脑开发</a></p><p class="categories"><a href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a> / <a href="/categories/%E9%9A%8F%E7%AC%94/%E5%8F%B3%E8%84%91%E5%BC%80%E5%8F%91/">右脑开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-06-29T08:11:35.896Z">2020-06-29</time></p><p class="title"><a href="/2020/06/29/%E5%89%8D%E7%AB%AF/%E5%89%8D%E5%8F%B0%E6%B8%B2%E6%9F%93%E6%A8%A1%E6%9D%BF/thymeleaf/"> </a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">十二月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">十二月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">十一月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">十月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">九月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">七月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">三月 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">二月 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">十二月 2017</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/10/"><span class="level-start"><span class="level-item">十月 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">九月 2017</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/08/"><span class="level-start"><span class="level-item">八月 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">六月 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">五月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">十二月 2016</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/11/"><span class="level-start"><span class="level-item">十一月 2016</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/10/"><span class="level-start"><span class="level-item">十月 2016</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/08/"><span class="level-start"><span class="level-item">八月 2016</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/03/"><span class="level-start"><span class="level-item">三月 2016</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/11/"><span class="level-start"><span class="level-item">十一月 2015</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/10/"><span class="level-start"><span class="level-item">十月 2015</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/08/"><span class="level-start"><span class="level-item">八月 2015</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/07/"><span class="level-start"><span class="level-item">七月 2015</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/02/"><span class="level-start"><span class="level-item">二月 2015</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/01/"><span class="level-start"><span class="level-item">一月 2015</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/11/"><span class="level-start"><span class="level-item">十一月 2014</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/10/"><span class="level-start"><span class="level-item">十月 2014</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/09/"><span class="level-start"><span class="level-item">九月 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/07/"><span class="level-start"><span class="level-item">七月 2014</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/04/"><span class="level-start"><span class="level-item">四月 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/03/"><span class="level-start"><span class="level-item">三月 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/11/"><span class="level-start"><span class="level-item">十一月 2013</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/10/"><span class="level-start"><span class="level-item">十月 2013</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/09/"><span class="level-start"><span class="level-item">九月 2013</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/04/"><span class="level-start"><span class="level-item">四月 2013</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2012/12/"><span class="level-start"><span class="level-item">十二月 2012</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2012/10/"><span class="level-start"><span class="level-item">十月 2012</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2012/09/"><span class="level-start"><span class="level-item">九月 2012</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/CSS/"><span class="tag">CSS</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Groovy/"><span class="tag">Groovy</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Homebrew/"><span class="tag">Homebrew</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAVASE%E8%AF%AD%E6%B3%95/"><span class="tag">JAVASE语法</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAVASE%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/"><span class="tag">JAVASE高级特性</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MAC/"><span class="tag">MAC</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NFS/"><span class="tag">NFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NOSQL/"><span class="tag">NOSQL</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHP/"><span class="tag">PHP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Photoshop/"><span class="tag">Photoshop</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Properties/"><span class="tag">Properties</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RocketMQ/"><span class="tag">RocketMQ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringMVC/"><span class="tag">SpringMVC</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UML/"><span class="tag">UML</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WEB%E5%AE%B9%E5%99%A8/"><span class="tag">WEB容器</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML/"><span class="tag">XML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML%E8%A7%A3%E6%9E%90%E5%99%A8/"><span class="tag">XML解析器</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bootstrap/"><span class="tag">bootstrap</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gradle/"><span class="tag">gradle</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jmeter/"><span class="tag">jmeter</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kafka/"><span class="tag">kafka</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lucene/"><span class="tag">lucene</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node/"><span class="tag">node</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-native/"><span class="tag">react native</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/solr/"><span class="tag">solr</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/springboot/"><span class="tag">springboot</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/springcloud/"><span class="tag">springcloud</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/stream/"><span class="tag">stream</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vsftpd/"><span class="tag">vsftpd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vue/"><span class="tag">vue</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zookeeper/"><span class="tag">zookeeper</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98/"><span class="tag">三方支付</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B8%9A%E5%8A%A1%E9%A2%86%E5%9F%9F/"><span class="tag">业务领域</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"><span class="tag">中间件</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%A7%E5%93%81/"><span class="tag">产品</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%90%86%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="tag">代理设计模式</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF/"><span class="tag">前端</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF%E6%A1%88%E4%BE%8B/"><span class="tag">前端案例</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"><span class="tag">前端项目构建工具</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"><span class="tag">单例模式</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"><span class="tag">单元测试</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8D%E5%B0%84/"><span class="tag">反射</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/"><span class="tag">反射机制</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96%E5%BA%94%E7%94%A8/"><span class="tag">国际化应用</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><span class="tag">小程序</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E5%85%B7/"><span class="tag">工具</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8C%81%E4%B9%85%E5%B1%82/"><span class="tag">持久层</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93ID%E7%94%9F%E6%88%90%E8%AE%BE%E8%AE%A1/"><span class="tag">数据库ID生成设计</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/"><span class="tag">数据库设计</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"><span class="tag">权限管理</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><span class="tag">正则表达式</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B3%9B%E5%9E%8B/"><span class="tag">泛型</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/"><span class="tag">线程安全</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4/"><span class="tag">终端命令</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"><span class="tag">网络编程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%8B%B1%E8%AF%AD%E5%A4%A9%E5%9C%B0/"><span class="tag">英语天地</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="tag">设计模式</span><span class="tag">4</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="藏经阁" height="28"></a><p class="is-size-7"><span>&copy; 2022 sxm-star</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><canvas class="fireworks" width="100%" height="100%" style="position: fixed; left: 0; top: 0; z-index: 99999999; pointer-events: none;"></canvas><script src="/js/anime.min.js" defer></script><script src="/js/fireworks.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/prism/codeBlockFuction.js"></script><script src="/js/prism/prism.js"></script><script src="/js/night/night.js" defer></script><script src="/js/snow/snow.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>